<script type="text/html" data-help-name="nextcloud-info">
  <p>Nodo utile agli <b>Administratori</b> per monitorare un server <a href="https://github.com/nextcloud/serverinfo" target="_new">Nextcloud</a>.</p>
  <h3>Input</h3>
  <dl class="message-properties">
  	<dt><i>ncurl</i> <span class="property-type">url-string</span></dt>
	  <dd>Indirizzo del endpoint API di una istanza di nextcloud. <code>ncurl</code> deve essere un indirizzo http(s) valido <br>esempio <pre>https://nextcloud.example.com/ocs/v2.php/apps/serverinfo/api/v1/info</pre> Il nodo accetta certificati insicuri se configurato spuntando il flag apposito. Ricorda che i certificati autoprodotti comportano il rischio di attacchi MIM <b>usalo a tuo rischio solo se indispensabile.</b>. Questo input verrà usato al posto del valore del campo <code>Indirizzo</code> presente nel pannello di configurazione.<br> <b>Ulteriori Endpoint di Nextcloud: </b>Oltre all'API di monitoraggio (/ocs/v2.php/apps/serverinfo/api/v1/info) il server nextcloud espone altri endpoint che permettono di monitorare gli utenti, le capacità del server, le notifiche (previo installazione dell'app notifiche su nextcloud).<br> Per richiedere una lista di <a href="https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-api-overview.html#user-metadata-list-user-ids" target="_new">utenti con relativi USER-ID</a>: <b>/ocs/v1.php/cloud/users</b><br>esempio <pre>https://nextcloud.example.com/ocs/v1.php/cloud/users</pre>Per informazioni specifiche su un determinato <a href="https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-api-overview.html#user-metadata" target="_new">utente</a>: <b>/ocs/v1.php/cloud/users/[USER-ID]</b><br>esempio <pre>https://nextcloud.example.com/ocs/v1.php/cloud/users/smith</pre>Per visualizzare le <a href="https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-api-overview.html#capabilities-api" target="_new">capacità del server nextcloud</a>: <b>/ocs/v1.php/cloud/capabilities</b><br>esempio <pre>https://nextcloud.example.com/ocs/v1.php/cloud/capabilities</pre> Inoltre sono utilizzabili tutte le <a href="https://docs.nextcloud.com/server/latest/developer_manual/core/externalapi.html" target="_new">API esposte dalle APP esterne</a> ad esempio, se l'APP delle notifiche è installata e abilitata sul server, è possibile interrogare la <a href="https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-api-overview.html#notifications" target="_new">API delle notifiche</a> specificando il seguente percorso: <b>/ocs/v2.php/apps/notifications/api/v2/notifications</b><br>esempio <pre>https://nextcloud.example.com/ocs/v2.php/apps/notifications/api/v2/notifications</pre></dd>
  	<dt><i>ncproperty</i> <span class="property-type">string</span></dt>
  	<dd>Nome della proprietà che conterrà la risposta come risultato dell'elaborazione del nodo. <code>ncproperty</code> deve essere costituito da un'unica parola contenente caratteri alfanumerici e trattini(-) o sottolineature(_). Quando il valore specificato non passa il controllo di validazione viene utilizzato il nome predefinito della proprietà, ovvero: <pre>payload</pre></dd>
  </dl>
  <h3>Output</h3>
  <dl class="message-properties">
  	<dt><i>payload</i> <span class="property-type">object</span></dt>
	  <dd>Il risultato finale dell'elaborazione del nodo sarà disponibile nella proprietà payload se non specificato diversamente utilizzando l'input <code>msg.ncproperty</code> o il valore presente nel campo <code>Risultato</code> dell'editor di configurazione del nodo. I risultati variano a seconda dell'endpoint usato. Utilizzando l'endpoint principale (/ocs/v2.php/apps/serverinfo/api/v1/info) si ottiene come risultato un oggetto composto dalle seguenti principali proprietà: nextcloud, server, activeUsers</dd>
  </dl>
</script>
